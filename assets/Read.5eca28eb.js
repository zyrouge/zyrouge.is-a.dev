import{S as n,_ as S,s as T,A as B}from"./Loader.f6cf717b.js";import{r as C,R as L}from"./index.d2201d61.js";import{a as $,U as f}from"./utils.361ba04a.js";import{d as R,m as y,E as b,y as U,z as A,G as V,n as j,q as E,r as F,o as l,e as h,f as t,u as m,i as g,w as r,t as _,g as D,j as N}from"./vendor.361979ef.js";import{M as w}from"./Message.2f0fe8fb.js";const q=t("hr",null,null,-1),G={class:"u-container u-container-h"},z={key:0,class:"u-flex py-10 min-h-[50vh]"},O={key:1},P=t("p",null,"404",-1),J=t("p",null," I know you could read, but this isn't the place for it. ",-1),K=N("\u{1F449} Go to articles"),Q=t("p",null,"500",-1),W=t("p",null,"Unfortunately, couldn't fetch the article.",-1),X={key:1},Y={class:"mb-3"},Z={class:"text-3xl font-bold mb-1"},tt={class:"mb-1"},et={class:"text-sm mb-1 text-secondary-400 mb-1"},st={class:"text-xs text-primary-500"},ot=t("hr",{class:"mb-8"},null,-1),at=["innerHTML"],dt=R({setup(nt){const c=y("Loading..."),p=b([]);U({title:A(()=>$.getTitle(`${c.value} | Article`)),meta:p});const d=V(),i=y(n.processing),e=y(null),I=A(()=>i.value===n.failed&&c.value==="404"),x=async()=>{c.value="Loading...";const a=typeof d.params.slug=="string"?d.params.slug:Array.isArray(d.params.slug)&&d.params.slug.length===1?d.params.slug[0]:null;if(!a){i.value=n.failed,c.value="404";return}try{e.value=await B.getArticleFromSlug(a),i.value=n.done,c.value=e.value.meta.title,p.push({name:"description",content:e.value.meta.description},{name:"keywords",content:e.value.meta.tags.join(", ")})}catch{i.value=n.failed,c.value="500"}},k=b([]),M=a=>{k.splice(0,1/0);const s=document.createElement("div");s.id=`ac-${f.random(8).join("")}`,s.innerHTML=f.getSafeHtml(a);for(const u of Array.from(s.querySelectorAll(":is(h1, h2, h3, h4, h5, h6)"))){const o=u.textContent,v=`h-${f.getHtmlSafeId(o)}`;u.id=v,u.setAttribute("onclick",`history.pushState(null, null, "#${v}"); this.scrollIntoView({ behavior: "smooth" });`),k.push({id:v,title:o})}return H(s.id),s.outerHTML},H=a=>{const s=setInterval(()=>{if(document.getElementById(a)){const o=document.getElementById(location.hash.slice(1));o==null||o.scrollIntoView({behavior:"smooth"}),clearInterval(s)}},100)};return j(x),E(()=>{C(p)}),(a,s)=>{const u=F("router-link");return l(),h("div",null,[q,t("div",G,[i.value!==m(n).done||!e.value?(l(),h("div",z,[i.value===m(n).processing?(l(),g(S,{key:0})):(l(),h("div",O,[m(I)?(l(),g(w,{key:0},{header:r(()=>[P]),body:r(()=>[J]),footer:r(()=>[D(u,{class:"text-primary-500 hover:text-secondary-500",to:m(L).articles},{default:r(()=>[K]),_:1},8,["to"])]),_:1})):(l(),g(w,{key:1},{header:r(()=>[Q]),body:r(()=>[W]),footer:r(()=>[t("button",{class:"text-primary-500 hover:text-secondary-500",onClick:x}," \u{1F504} Retry ")]),_:1}))]))])):(l(),h("article",X,[t("div",Y,[t("p",Z,_(e.value.meta.title),1),t("p",tt,_(e.value.meta.description),1),t("p",et,_(e.value.meta.tags.map(o=>`#${o}`).join(" ")),1),t("p",st,_(m(T).Date.relative(new Date(e.value.meta.time))),1)]),ot,t("div",{class:"u-stylify",innerHTML:M(e.value.content)},null,8,at)]))])])}}});export{dt as default};
