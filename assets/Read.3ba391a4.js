import{S as c,_ as F,s as U,A as R}from"./Loader.f6f98ad7.js";import{s as C,r as V,a as H}from"./head.ed8b6b52.js";import{a as M,U as b,R as j}from"./index.45754629.js";import{d as D,l as g,E as T,G as N,y as I,H as q,m as G,n as z,r as K,o as l,b as h,e as t,u as r,h as x,w as d,t as _,F as P,g as W,f as J,C as O,i as Q}from"./vendor.56cbe960.js";import{M as S}from"./Message.71956cbe.js";const X=t("hr",null,null,-1),Y={class:"u-container u-container-h"},Z={key:0,class:"u-flex py-10 min-h-[50vh]"},tt={key:1},et=t("p",null,"404",-1),st=t("p",null," I know you could read, but this isn't the place for it. ",-1),at=Q("\u{1F449} Go to articles"),nt=t("p",null,"500",-1),ot=t("p",null,"Unfortunately, couldn't fetch the article.",-1),lt={key:1},it={class:"mb-3"},ct={class:"text-3xl font-bold mb-1"},rt={class:"mb-1"},dt={class:"text-sm mb-1 text-secondary-400 mb-1"},ut={class:"text-xs"},mt={class:"text-primary-500"},ht={class:"text-secondary-400"},_t=t("hr",null,null,-1),pt={class:"lg:grid lg:grid-cols-4 lg:gap-10"},vt={class:"mt-8 lg:col-span-1"},gt={class:"lg:sticky lg:top-6"},ft=t("p",{class:"text-lg font-bold mb-2"}," Table of contents ",-1),yt={class:"list-inside list-decimal"},kt=["onClick"],bt=["innerHTML"],Tt=D({setup(xt){const i=g("Loading..."),v=T([]),w=[];C(M.getTitle(`${i.value} ${M.infix} Article`));const p=N(),u=g(c.processing),a=g(null),$=I(()=>u.value===c.failed&&i.value==="404"),A=async()=>{i.value="Loading...";const s=typeof p.params.slug=="string"?p.params.slug:Array.isArray(p.params.slug)&&p.params.slug.length===1?p.params.slug[0]:null;if(!s){u.value=c.failed,i.value="404";return}try{a.value=await R.getArticleFromSlug(s),i.value=a.value.meta.title;const o=[{name:"title",content:a.value.meta.title},{name:"og:title",content:a.value.meta.title},{name:"description",content:a.value.meta.description},{name:"og:description",content:a.value.meta.description},{name:"og:type",content:"article"},{name:"keywords",content:a.value.meta.tags.join(", ")}];o.forEach(n=>{const e=document.querySelector(`meta[name="${n.name}"]`);e!=null&&e.content&&w.push({name:n.name,content:e.content})}),v.push(...o),u.value=c.done}catch{u.value=c.failed,i.value="500"}},f=T([]),L=I(()=>{var o;if(f.splice(0,1/0),!a.value)return"";const s=document.createElement("div");s.id=`ac-${b.random(8).join("")}`,s.innerHTML=b.getSafeHtml((o=a.value)==null?void 0:o.content);for(const n of Array.from(s.querySelectorAll(":is(h1, h2, h3, h4, h5, h6)"))){const e=n.textContent,k=`h-${b.getHtmlSafeId(e)}`;n.id=k,n.setAttribute("onclick","window.toggleCurrentHeading(this.id);"),f.push({id:k,title:e})}return B(s.id),s.outerHTML}),m=g(null),y=s=>{const o="data-active";if(m.value){const e=document.getElementById(m.value);if(e==null||e.removeAttribute(o),m.value===s){m.value=null;return}}const n=document.getElementById(s);n&&(history.replaceState(void 0,"",`#${s}`),n.setAttribute(o,""),n.scrollIntoView({behavior:"smooth"}),m.value=s)};window.toggleCurrentHeading=y;const B=s=>{const o=setInterval(()=>{document.getElementById(s)&&(y(location.hash.slice(1)),clearInterval(o))},100)},E=q([i,v],()=>{C(i.value),H(v)});return G(A),z(()=>{E(),delete window.toggleCurrentHeading,V(v),H(w)}),(s,o)=>{const n=K("router-link");return l(),h("div",null,[X,t("div",Y,[u.value!==r(c).done||!a.value?(l(),h("div",Z,[u.value===r(c).processing?(l(),x(F,{key:0})):(l(),h("div",tt,[r($)?(l(),x(S,{key:0},{header:d(()=>[et]),body:d(()=>[st]),footer:d(()=>[J(n,{class:"text-primary-500 hover:text-secondary-500",to:r(j).articles},{default:d(()=>[at]),_:1},8,["to"])]),_:1})):(l(),x(S,{key:1},{header:d(()=>[nt]),body:d(()=>[ot]),footer:d(()=>[t("button",{class:"text-primary-500 hover:text-secondary-500",onClick:A}," \u{1F504} Retry ")]),_:1}))]))])):(l(),h("article",lt,[t("div",it,[t("p",ct,_(a.value.meta.title),1),t("p",rt,_(a.value.meta.description),1),t("p",dt,_(a.value.meta.tags.map(e=>`#${e}`).join(" ")),1),t("p",ut,[t("span",mt,_(r(U).Date.relative(new Date(a.value.meta.publishedAt))),1),t("span",ht," / "+_(a.value.meta.readingTime)+" mins. read",1)])]),_t,t("div",pt,[t("aside",vt,[t("div",gt,[ft,t("ol",yt,[(l(!0),h(P,null,W(r(f),e=>(l(),h("li",{key:e.id,class:O(["cursor-pointer hover:text-primary-500",m.value===e.id&&"text-primary-500"]),onClick:k=>y(e.id)},_(e.title),11,kt))),128))])])]),t("div",{class:"u-stylify lg:row-start-1 lg:col-start-1 lg:col-span-3",innerHTML:r(L)},null,8,bt)])]))])])}}});export{Tt as default};
