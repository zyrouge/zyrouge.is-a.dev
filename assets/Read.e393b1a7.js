import{S as l,_ as S,s as T,A as B}from"./Loader.f6cf717b.js";import{r as L,R as E}from"./index.75831f2a.js";import{a as $,U as f}from"./utils.361ba04a.js";import{d as R,m as _,E as b,y as U,z as A,G as j,n as V,q as D,r as F,o as r,e as v,f as e,u as h,i as y,w as i,t as p,g as N,j as q}from"./vendor.361979ef.js";import{M as H}from"./Message.ba938f85.js";const G=e("hr",null,null,-1),z={class:"u-container u-container-h"},K={key:0,class:"u-flex py-10 min-h-[50vh]"},P={key:1},J=e("p",null,"404",-1),O=e("p",null," I know you could read, but this isn't the place for it. ",-1),Q=q("\u{1F449} Go to articles"),W=e("p",null,"500",-1),X=e("p",null,"Unfortunately, couldn't fetch the article.",-1),Y={key:1},Z={class:"mb-3"},ee={class:"text-3xl font-bold mb-1"},te={class:"mb-1"},oe={class:"text-sm mb-1 text-secondary-400 mb-1"},ae={class:"text-xs text-primary-500"},se=e("hr",{class:"mb-8"},null,-1),ne=["innerHTML"],me=R({setup(le){const c=_("Loading..."),g=b([]);U({title:A(()=>$.getTitle(`${c.value} | Article`)),meta:g});const d=j(),u=_(l.processing),a=_(null),C=A(()=>u.value===l.failed&&c.value==="404"),x=async()=>{c.value="Loading...";const t=typeof d.params.slug=="string"?d.params.slug:Array.isArray(d.params.slug)&&d.params.slug.length===1?d.params.slug[0]:null;if(!t){u.value=l.failed,c.value="404";return}try{a.value=await B.getArticleFromSlug(t),u.value=l.done,c.value=a.value.meta.title,g.push({name:"description",content:a.value.meta.description},{name:"keywords",content:a.value.meta.tags.join(", ")})}catch{u.value=l.failed,c.value="500"}},w=b([]),I=t=>{w.splice(0,1/0);const o=document.createElement("div");o.id=`ac-${f.random(8).join("")}`,o.innerHTML=f.getSafeHtml(t);for(const s of Array.from(o.querySelectorAll(":is(h1, h2, h3, h4, h5, h6)"))){const n=s.textContent,k=`h-${f.getHtmlSafeId(n)}`;s.id=k,s.setAttribute("onclick","window.toggleCurrentHeading(this.id);"),w.push({id:k,title:n})}return M(o.id),o.outerHTML},m=_(null);window.toggleCurrentHeading=t=>{const o="data-active";if(m.value){const n=document.getElementById(m.value);if(n==null||n.removeAttribute(o),m.value===t){m.value=null;return}}const s=document.getElementById(t);s&&(history.replaceState(void 0,"",`#${t}`),s.setAttribute(o,""),s.scrollIntoView({behavior:"smooth"}),m.value=t)};const M=t=>{const o=setInterval(()=>{document.getElementById(t)&&(window.toggleCurrentHeading(location.hash.slice(1)),clearInterval(o))},100)};return V(x),D(()=>{delete window.toggleCurrentHeading,L(g)}),(t,o)=>{const s=F("router-link");return r(),v("div",null,[G,e("div",z,[u.value!==h(l).done||!a.value?(r(),v("div",K,[u.value===h(l).processing?(r(),y(S,{key:0})):(r(),v("div",P,[h(C)?(r(),y(H,{key:0},{header:i(()=>[J]),body:i(()=>[O]),footer:i(()=>[N(s,{class:"text-primary-500 hover:text-secondary-500",to:h(E).articles},{default:i(()=>[Q]),_:1},8,["to"])]),_:1})):(r(),y(H,{key:1},{header:i(()=>[W]),body:i(()=>[X]),footer:i(()=>[e("button",{class:"text-primary-500 hover:text-secondary-500",onClick:x}," \u{1F504} Retry ")]),_:1}))]))])):(r(),v("article",Y,[e("div",Z,[e("p",ee,p(a.value.meta.title),1),e("p",te,p(a.value.meta.description),1),e("p",oe,p(a.value.meta.tags.map(n=>`#${n}`).join(" ")),1),e("p",ae,p(h(T).Date.relative(new Date(a.value.meta.time))),1)]),se,e("div",{class:"u-stylify",innerHTML:I(a.value.content)},null,8,ne)]))])])}}});export{me as default};
