import{S as l,_ as T,s as B,A as L}from"./Loader.b2a4142b.js";import{a as b,r as $,U as f,R as E}from"./index.20d68d4a.js";import{d as R,m as _,H as A,z as U,A as H,I as j,n as V,q as D,r as F,o as i,e as v,f as e,u as h,i as y,w as r,t as p,g as N,j as q}from"./vendor.6e132d5a.js";import{M as I}from"./Message.cc22c977.js";const z=e("hr",null,null,-1),G={class:"u-container u-container-h"},K={key:0,class:"u-flex py-10 min-h-[50vh]"},P={key:1},J=e("p",null,"404",-1),O=e("p",null," I know you could read, but this isn't the place for it. ",-1),Q=q("\u{1F449} Go to articles"),W=e("p",null,"500",-1),X=e("p",null,"Unfortunately, couldn't fetch the article.",-1),Y={key:1},Z={class:"mb-3"},ee={class:"text-3xl font-bold mb-1"},te={class:"mb-1"},ae={class:"text-sm mb-1 text-secondary-400 mb-1"},se={class:"text-xs text-primary-500"},oe=e("hr",{class:"mb-8"},null,-1),ne=["innerHTML"],de=R({setup(le){const c=_("Loading..."),g=A([]);U({title:H(()=>b.getTitle(`${c.value} ${b.infix} Article`)),meta:g});const d=j(),u=_(l.processing),s=_(null),C=H(()=>u.value===l.failed&&c.value==="404"),x=async()=>{c.value="Loading...";const t=typeof d.params.slug=="string"?d.params.slug:Array.isArray(d.params.slug)&&d.params.slug.length===1?d.params.slug[0]:null;if(!t){u.value=l.failed,c.value="404";return}try{s.value=await L.getArticleFromSlug(t),u.value=l.done,c.value=s.value.meta.title,g.push({name:"description",content:s.value.meta.description},{name:"keywords",content:s.value.meta.tags.join(", ")})}catch{u.value=l.failed,c.value="500"}},w=A([]),M=t=>{w.splice(0,1/0);const a=document.createElement("div");a.id=`ac-${f.random(8).join("")}`,a.innerHTML=f.getSafeHtml(t);for(const o of Array.from(a.querySelectorAll(":is(h1, h2, h3, h4, h5, h6)"))){const n=o.textContent,k=`h-${f.getHtmlSafeId(n)}`;o.id=k,o.setAttribute("onclick","window.toggleCurrentHeading(this.id);"),w.push({id:k,title:n})}return S(a.id),a.outerHTML},m=_(null);window.toggleCurrentHeading=t=>{const a="data-active";if(m.value){const n=document.getElementById(m.value);if(n==null||n.removeAttribute(a),m.value===t){m.value=null;return}}const o=document.getElementById(t);o&&(history.replaceState(void 0,"",`#${t}`),o.setAttribute(a,""),o.scrollIntoView({behavior:"smooth"}),m.value=t)};const S=t=>{const a=setInterval(()=>{document.getElementById(t)&&(window.toggleCurrentHeading(location.hash.slice(1)),clearInterval(a))},100)};return V(x),D(()=>{delete window.toggleCurrentHeading,$(g)}),(t,a)=>{const o=F("router-link");return i(),v("div",null,[z,e("div",G,[u.value!==h(l).done||!s.value?(i(),v("div",K,[u.value===h(l).processing?(i(),y(T,{key:0})):(i(),v("div",P,[h(C)?(i(),y(I,{key:0},{header:r(()=>[J]),body:r(()=>[O]),footer:r(()=>[N(o,{class:"text-primary-500 hover:text-secondary-500",to:h(E).articles},{default:r(()=>[Q]),_:1},8,["to"])]),_:1})):(i(),y(I,{key:1},{header:r(()=>[W]),body:r(()=>[X]),footer:r(()=>[e("button",{class:"text-primary-500 hover:text-secondary-500",onClick:x}," \u{1F504} Retry ")]),_:1}))]))])):(i(),v("article",Y,[e("div",Z,[e("p",ee,p(s.value.meta.title),1),e("p",te,p(s.value.meta.description),1),e("p",ae,p(s.value.meta.tags.map(n=>`#${n}`).join(" ")),1),e("p",se,p(h(B).Date.relative(new Date(s.value.meta.time))),1)]),oe,e("div",{class:"u-stylify",innerHTML:M(s.value.content)},null,8,ne)]))])])}}});export{de as default};
