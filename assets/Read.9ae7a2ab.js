import{S as c,_ as E,s as L,A as R}from"./Loader.f6f98ad7.js";import{s as A,r as U,a as H}from"./head.ed8b6b52.js";import{a as M,U as f,R as V}from"./index.070ef0cd.js";import{d as j,l as v,E as T,G as D,y as F,H as N,m as q,n as G,r as K,o as i,b as g,e,u as h,h as y,w as r,t as _,f as P,i as W}from"./vendor.56cbe960.js";import{M as C}from"./Message.0b79dd92.js";const z=e("hr",null,null,-1),J={class:"u-container u-container-h"},O={key:0,class:"u-flex py-10 min-h-[50vh]"},Q={key:1},X=e("p",null,"404",-1),Y=e("p",null," I know you could read, but this isn't the place for it. ",-1),Z=W("\u{1F449} Go to articles"),ee=e("p",null,"500",-1),te=e("p",null,"Unfortunately, couldn't fetch the article.",-1),ae={key:1},ne={class:"mb-3"},oe={class:"text-3xl font-bold mb-1"},se={class:"mb-1"},le={class:"text-sm mb-1 text-secondary-400 mb-1"},ce={class:"text-xs"},ie={class:"text-primary-500"},re={class:"text-secondary-400"},ue=e("hr",{class:"mb-8"},null,-1),de=["innerHTML"],fe=j({setup(me){const l=v("Loading..."),p=T([]),x=[];A(M.getTitle(`${l.value} ${M.infix} Article`));const d=D(),u=v(c.processing),a=v(null),I=F(()=>u.value===c.failed&&l.value==="404"),w=async()=>{l.value="Loading...";const s=typeof d.params.slug=="string"?d.params.slug:Array.isArray(d.params.slug)&&d.params.slug.length===1?d.params.slug[0]:null;if(!s){u.value=c.failed,l.value="404";return}try{a.value=await R.getArticleFromSlug(s),u.value=c.done,l.value=a.value.meta.title;const t=[{name:"title",content:a.value.meta.title},{name:"og:title",content:a.value.meta.title},{name:"description",content:a.value.meta.description},{name:"og:description",content:a.value.meta.description},{name:"og:type",content:"article"},{name:"keywords",content:a.value.meta.tags.join(", ")}];t.forEach(n=>{const o=document.querySelector(`meta[name="${n.name}"]`);o!=null&&o.content&&x.push({name:n.name,content:o.content})}),p.push(...t)}catch{u.value=c.failed,l.value="500"}},b=T([]),S=s=>{b.splice(0,1/0);const t=document.createElement("div");t.id=`ac-${f.random(8).join("")}`,t.innerHTML=f.getSafeHtml(s);for(const n of Array.from(t.querySelectorAll(":is(h1, h2, h3, h4, h5, h6)"))){const o=n.textContent,k=`h-${f.getHtmlSafeId(o)}`;n.id=k,n.setAttribute("onclick","window.toggleCurrentHeading(this.id);"),b.push({id:k,title:o})}return $(t.id),t.outerHTML},m=v(null);window.toggleCurrentHeading=s=>{const t="data-active";if(m.value){const o=document.getElementById(m.value);if(o==null||o.removeAttribute(t),m.value===s){m.value=null;return}}const n=document.getElementById(s);n&&(history.replaceState(void 0,"",`#${s}`),n.setAttribute(t,""),n.scrollIntoView({behavior:"smooth"}),m.value=s)};const $=s=>{const t=setInterval(()=>{document.getElementById(s)&&(window.toggleCurrentHeading(location.hash.slice(1)),clearInterval(t))},100)},B=N([l,p],()=>{A(l.value),H(p)});return q(w),G(()=>{B(),delete window.toggleCurrentHeading,U(p),H(x)}),(s,t)=>{const n=K("router-link");return i(),g("div",null,[z,e("div",J,[u.value!==h(c).done||!a.value?(i(),g("div",O,[u.value===h(c).processing?(i(),y(E,{key:0})):(i(),g("div",Q,[h(I)?(i(),y(C,{key:0},{header:r(()=>[X]),body:r(()=>[Y]),footer:r(()=>[P(n,{class:"text-primary-500 hover:text-secondary-500",to:h(V).articles},{default:r(()=>[Z]),_:1},8,["to"])]),_:1})):(i(),y(C,{key:1},{header:r(()=>[ee]),body:r(()=>[te]),footer:r(()=>[e("button",{class:"text-primary-500 hover:text-secondary-500",onClick:w}," \u{1F504} Retry ")]),_:1}))]))])):(i(),g("article",ae,[e("div",ne,[e("p",oe,_(a.value.meta.title),1),e("p",se,_(a.value.meta.description),1),e("p",le,_(a.value.meta.tags.map(o=>`#${o}`).join(" ")),1),e("p",ce,[e("span",ie,_(h(L).Date.relative(new Date(a.value.meta.publishedAt))),1),e("span",re," / "+_(a.value.meta.readingTime)+" mins. read",1)])]),ue,e("div",{class:"u-stylify",innerHTML:S(a.value.content)},null,8,de)]))])])}}});export{fe as default};
